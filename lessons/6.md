# Testando a funcionalidade de _Logout_

A √∫ltima funcionalidade que falta ser coberta por testes √© o _Logout_. üö™

## Exerc√≠cio

1. No arquivo `cypress/e2e/authenticated.cy.js`, adicione o seguinte teste:

```js
// cypress/e2e/authenticated.cy.js

import { faker } from '@faker-js/faker/locale/en'

describe('Scenarios where authentication is a pre-condition', () => {
  // C√≥digo j√° existente ...

  it.only('logs out', () => {
    cy.visit('/')
    cy.wait('@getNotes')

    cy.contains('.nav a', 'Logout').click()

    cy.get('#email').should('be.visible')
  })
})
```

2. Execute o teste rec√©m criado com o comando `npx cypress run --spec cypress/e2e/authenticated.cy.js`

> **Obs.:** Siga adiante para o exerc√≠cio extra quando o teste estiver passando.

## Exerc√≠cio extra -  Testando no _viewport_ de um dispositivo m√≥vel üì±

A aplica√ß√£o **Scratch** renderiza com uma pequena diferen√ßa quando em um _viewport_ com largura menor que 768 pixels. Em tal situa√ß√£o, o menu com os links de _Settings_ e _Logout_ √© escondido e para acessar tais links √© necess√°rio clicar em um bot√£o que exibe e esconde os links.

Teu exerc√≠cio √©:

1. Adicione a seguinte propriedade no arquivo `cypress.config.js`, logo abaixo da `baseUrl`:

```js
env: {
  viewportWidthBreakpoint: 768,
},

```

2. No teste de _Logout_, entre os comandos `cy.wait('@getNotes')` e `cy.contains('.nav a', 'Logout').click()`, adicione o seguinte c√≥digo:

```js
if (Cypress.config('viewportWidth') < Cypress.env('viewportWidthBreakpoint')) {
  cy.get('.navbar-toggle.collapsed')
    .should('be.visible')
    .click()
}

```

3. Caso a __Cypress App__ esteja aberta, feche-a e abra-a novamente, por√©m, desta vez com o comando `npx cypress open --config viewportWidth=767,viewportHeight=480`, e ent√£o, execute a suite de testes `authenticated.cy.js` para ver como o teste de logout se adapta ao _viewport_ menor
4. Feche a __Cypress App__ e abra-a novamente, por√©m agora com o comando `npx cypress open` e execute a suite de testes `authenticated.cy.js` novamente, para verificar que o logout continua funcionando tamb√©m com o _viewport_ padr√£o.

> üßë‚Äçüè´ Siga adiante somente quando garantir que o mesmo teste passa em ambos _viewports_.
>
> **Obs. 2:** N√£o esque√ßa de remover o `.only` do novo teste depois de confirmar que est√° tudo ok. üòâ

## Conte√∫do relacionado

Como uma sugest√£o de conte√∫do extra, recomendo que leia o blog post [Como realizar uma a√ß√£o condicionalmente com Cypress](https://talkingabouttesting.com/2021/02/23/como-realizar-uma-acao-condicionalmente-com-cypress/), publicado em 2021 no blog da TAT.

## Mostre ao mundo o que voc√™ aprendeu

Como forma de demonstrar √† sua rede profissioinal seus novos aprendizados, poste o seguinte no LinkedIn.

> **Estou fazendo o curso de [testes _end-to-end_ com Cypress](https://www.udemy.com/course/testes-end-to-end-com-cypress/?referralCode=BFC58FC7B29F2F37904D) da Escola TAT no Udemy, onde aprendi como testar aplica√ß√µes responsivas. #TalkingAboutTesting #EscolaTAT #Cypress**

**Observa√ß√£o:** Lembre de me marcar em sua publica√ß√£o. Segue [meu perfil no LinkedIn](https://www.linkedin.com/in/walmyr-lima-e-silva-filho).

___

Legal! Agora, al√©m de cobrir o cen√°rio de _Logout_ com um teste automatizado, estamos verificando o mesmo sob a perspectiva de dois _viewports_ diferentes. üéà

V√° para a [aula 7](./7.md) e vamos configurar os testes e an√°lise est√°tica de c√≥digo para rodar em um _workflow_ de integra√ß√£o cont√≠nua.
